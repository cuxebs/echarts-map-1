<template>
  <div class="about">
    <div id="allmap"></div>
    <div class="btn btn-primary" @click="startEdit=true">开始编辑</div>
    <div class="btn btn-primary" @click="startEdit=false">结束编辑</div>
    <div class="media">
      <div class="media-body">
        <input type="text" v-model="point" class="form-control" placeholder="">
        <div class="btn btn-default" @click="deletePoint()">删除</div>

      </div>
      <div class="media-body">
        <input type="text" v-model="linePoint" class="form-control"  placeholder="">
        <div class="btn btn-default" @click="linePoint=''">清空</div>

      </div>
    </div>
  </div>
</template>
<style lang="stylus" scoped="">
  #allmap {
    width: 100%;
    height: 700px;
  }
</style>
<script>
  import {MP} from '../MP.js'
  require('echarts/extension/bmap/bmap')
  export default {
    name: 'Tool',
    data () {
      return {
        startEdit: false,
        point: '', // 获取覆盖物的坐标
        ply: '',
        polygon: '',
        map: '',
        map2: '',
        points: [],
        linePoint: '', // 取点
        BMap: null
      }
    },
    mounted: function () {
      const self = this
      self.$nextTick(function () {
        if (window.BMap) {
          self.BMap = window.BMap
          self.init_chart(window.BMap)
          return
        }
        MP('G0cTfLmvMdmb6x2QLSGnoTM7piZOfGGu').then(function (BMap) {
          // 在此调用api
          window.BMap = self.BMap = BMap
          self.init_chart(BMap)
        })
      })
    },
    methods: {
      /**
       * 关闭编辑后 删除
       */
      deletePoint () {
        var self = this
        var tempLng = self.point.split(',')[0]
        for (var i = 0; i < self.points.length; i++) {
          if (self.points[i].lng === +tempLng) {
            self.points.splice(i, 1)
            console.log(self.points)
            self.addOverlay()
            return
          }
        }
      },
      init_chart (BMap) {
        const self = this
        self._init_bmap_3(BMap)
      },
      /**
       * 标记点
       * 蔡官镇
       * 轿子山镇
       * 龙宫镇
       * 幺铺镇
       *
       * 岩腊乡
       * 鸡场布衣族
       * 杨武步依
       * 新场乡
       *
       * 黄腊布依苗族乡
       * 刘官乡
       * 大西桥镇
       * 东屯乡
       * 双堡镇
       * 旧州镇
       * 七眼桥镇
       * 宋旗镇
       */
      addPoint () {
        var self = this
        var points = '106.078909,26.351385;106.076035,26.358637;106.089258,26.381425;106.100756,26.38971;106.097307,26.399548;106.088683,26.401102;106.089258,26.40835;106.063962,26.412492;106.068561,26.436305;106.052463,26.434752;106.046714,26.431128;106.013369,26.421811;106.002446,26.429058;105.999571,26.447174;105.988648,26.442516;105.991522,26.434234;105.989223,26.434752;105.978874,26.418705;105.969675,26.41301;105.97485,26.404726;105.956452,26.398513;105.948978,26.390228;105.93978,26.38971;105.939205,26.373139;105.950703,26.358119;105.970825,26.342579;105.993822,26.33429;106.022568,26.33688;106.051888,26.343615;106.07316,26.348277;' +
                '105.993822,26.33429;105.985773,26.32341;105.961052,26.293873;105.933456,26.27677;105.90701,26.268994;105.877689,26.270031;105.851818,26.272623;105.849518,26.277806;105.865616,26.282471;105.870215,26.293355;105.861016,26.299056;105.863891,26.310974;105.882863,26.306829;105.886888,26.313047;105.884588,26.327555;105.876539,26.328073;105.877114,26.332218;105.866766,26.333772;105.871365,26.340507;105.914483,26.359155;105.913909,26.36537;105.920808,26.366406;105.926557,26.370031;105.921957,26.374175;105.939205,26.373139;105.950703,26.358119;105.970825,26.342579;' +
                '105.894936,26.147114;105.887462,26.122722;105.878839,26.115455;105.871365,26.102997;105.86849,26.106112;105.864466,26.10144;105.862741,26.087942;105.854692,26.083789;105.857567,26.081712;105.846643,26.07652;105.83687,26.065615;105.844344,26.065615;105.845494,26.058345;105.854117,26.06925;105.862166,26.060941;105.876539,26.055748;105.879414,26.051594;105.871365,26.037571;105.879414,26.034454;105.885163,26.041206;105.901835,26.055229;105.924832,26.070808;105.944379,26.085346;105.963351,26.11286;105.948978,26.142443;105.927132,26.151265;105.908159,26.150746;' +
                '105.843769,26.236333;105.824797,26.239444;105.816173,26.235296;105.815598,26.232184;105.820772,26.231666;105.827671,26.21922;105.815023,26.209885;105.816173,26.206255;105.809849,26.201587;105.805824,26.206774;105.792601,26.190176;105.789727,26.180319;105.769605,26.178763;105.756957,26.164755;105.755232,26.157491;105.763281,26.145557;105.77018,26.141924;105.777654,26.142443;105.778229,26.136216;105.792026,26.137254;105.809849,26.150227;105.813298,26.147114;105.809274,26.145557;105.809849,26.143481;105.805824,26.140886;105.812723,26.137254;105.825372,26.149189;105.825372,26.140886;105.825947,26.149708;105.826521,26.141924;105.845494,26.154378;105.850093,26.150746;105.87079,26.152822;105.890337,26.16735;105.881713,26.199512;105.867915,26.221813;105.853542,26.233221;' +
                '' +
                '105.898961,26.040168;105.904135,26.034973;105.904135,26.025104;105.911609,26.023026;105.90356,26.01939;105.90241,26.014195;105.909884,26.012117;105.918508,26.013156;105.919083,26.009519;105.913334,26.004843;105.914483,25.99705;105.944954,26.010039;105.957602,26.015234;105.9714,26.011597;105.986348,26.018351;106.002446,26.019909;106.00647,26.015753;106.014519,26.015234;106.013944,26.009519;106.017393,26.006402;106.028892,26.012636;106.027742,26.015234;106.029467,26.023026;106.03809,26.030818;106.036366,26.037051;106.04269,26.03809;106.047864,26.065096;106.055338,26.039129;106.056488,26.045361;106.059362,26.051594;106.054188,26.079635;106.023143,26.106631;105.984048,26.115974;105.963351,26.11286;105.944379,26.085346;105.924832,26.070808;105.901835,26.055229;' +
                '106.07776,26.053671;106.085808,26.050036;106.094432,26.029779;106.091557,26.022507;106.101331,26.012117;106.104781,26.011597;106.121453,26.021468;106.138701,26.046919;106.149624,26.080673;106.132376,26.121684;106.089833,26.140368;106.050164,26.129469;106.023143,26.106631;106.054188,26.079635;106.047864,26.065096;106.059362,26.051594;' +
                '106.128352,26.017831;106.130652,26.009;106.145025,26.009;106.153648,26.005363;106.156523,26.001206;106.162272,26.001206;106.169746,25.984059;106.166296,25.96535;106.172046,25.953396;106.170321,25.947678;106.174345,25.947678;106.186993,25.960153;106.191593,25.955475;106.193892,25.957034;106.189868,25.964831;106.191593,25.974705;106.202516,25.973146;106.20769,25.993412;106.218614,25.994971;106.223788,25.989256;106.227238,25.989256;106.226663,25.99705;106.222638,26.005363;106.231262,26.004324;106.227238,26.011078;106.223788,26.01939;106.226663,26.025624;106.219764,26.027182;106.223213,26.041726;106.240461,26.043284;106.24506,26.056268;106.239886,26.06198;106.228962,26.083269;106.207115,26.105593;106.177795,26.121684;106.150774,26.125836;106.132376,26.121684;106.149624,26.080673;106.138701,26.046919;' +
                '106.086383,26.177726;106.058787,26.20055;106.022568,26.216109;105.992672,26.217665;105.961627,26.21559;105.94093,26.208329;105.915633,26.196919;105.898961,26.186544;105.890337,26.16735;105.894936,26.147114;105.908159,26.150746;105.927132,26.151265;105.948978,26.142443;105.963351,26.11286;105.984048,26.115974;106.023143,26.106631;106.050164,26.129469;106.089833,26.140368;' +
                '' +
                '106.234137,26.295946;106.227812,26.282989;106.231262,26.270031;106.238736,26.261219;106.249659,26.251369;106.260583,26.248258;106.283579,26.246184;106.287029,26.254998;106.303126,26.2607;106.310025,26.235814;106.331297,26.23011;106.342796,26.229592;106.354869,26.240999;106.356594,26.258627;106.367517,26.259145;106.364642,26.263811;106.368667,26.268994;106.354869,26.289209;106.335897,26.293355;106.317499,26.307865;106.31175,26.30061;106.316924,26.293873;106.3106,26.283508;106.31175,26.273141;106.305426,26.267439;106.284154,26.259663;106.28128,26.265366;106.293353,26.272623;106.288753,26.275733;106.285879,26.286617;106.292778,26.29491;106.291053,26.301129;106.284729,26.30061;106.264032,26.289727;106.24161,26.304238;106.242185,26.30061;106.251959,26.289727;106.246785,26.287654;' +
                '106.232412,26.310974;106.224938,26.320301;106.215739,26.320819;106.20769,26.312011;106.184119,26.300092;106.182969,26.282471;106.189868,26.265366;106.203091,26.248776;106.219189,26.236333;106.235861,26.23011;106.249659,26.22648;106.248509,26.232184;106.259433,26.235814;106.260583,26.248258;106.249659,26.251369;106.238736,26.261219;106.231262,26.270031;106.227812,26.282989;106.234137,26.295946;' +
                '106.097882,26.359155;106.105355,26.358637;106.119153,26.372621;106.116854,26.388675;106.11168,26.392817;106.114554,26.396442;106.122028,26.397477;106.141575,26.389192;106.161122,26.387639;106.166871,26.372103;106.158248,26.36796;106.157098,26.361745;106.165722,26.353457;106.165722,26.343615;106.17607,26.33688;106.170896,26.329109;106.155948,26.321337;106.163422,26.31512;106.169746,26.301647;106.149049,26.302165;106.123753,26.313565;106.099606,26.332218;106.085233,26.347759;106.07316,26.348277;' +
                '106.266907,26.229592;106.279555,26.22648;106.297952,26.215072;106.299102,26.203662;106.289903,26.194844;106.289903,26.176169;106.28128,26.150227;106.274381,26.149189;106.268631,26.136216;106.285304,26.129988;106.289328,26.12376;106.287029,26.118051;106.295078,26.111303;106.295652,26.105593;106.286454,26.106112;106.27553,26.096249;106.268631,26.093653;106.263457,26.094691;106.265182,26.102478;106.261732,26.109227;106.250234,26.12895;106.234711,26.156973;106.223213,26.190176;106.227238,26.21922;106.249659,26.22648;' +
                '106.086383,26.177726;106.089833,26.140368;106.132376,26.121684;106.150774,26.125836;106.177795,26.121684;106.207115,26.105593;106.228962,26.083269;106.248509,26.081193;106.24736,26.105593;106.250234,26.12895;106.234711,26.156973;106.223213,26.190176;106.191593,26.203143;106.159398,26.204699;106.131227,26.201587;106.108805,26.194844;' +
                '106.126052,26.302165;106.099606,26.293873;106.079484,26.27988;106.055913,26.264847;106.039815,26.252405;106.027167,26.23737;106.022568,26.216109;106.058787,26.20055;106.086383,26.177726;106.108805,26.194844;106.131227,26.201587;106.159398,26.204699;106.191593,26.203143;106.223213,26.190176;106.227238,26.21922;106.249659,26.22648;106.235861,26.23011;106.219189,26.236333;106.203091,26.248776;106.189868,26.265366;106.182969,26.282471;106.184119,26.300092;106.169746,26.301647;106.149049,26.302165;' +
                '105.966226,26.236851;105.943229,26.263292;105.933456,26.27677;105.961052,26.293873;105.985773,26.32341;105.993822,26.33429;106.022568,26.33688;106.051888,26.343615;106.07316,26.348277;106.085233,26.347759;106.099606,26.332218;106.123753,26.313565;106.126052,26.302165;106.099606,26.293873;106.079484,26.27988;106.055913,26.264847;106.039815,26.252405;106.027167,26.23737;106.022568,26.216109;105.992672,26.217665;' +
                '105.844344,26.251369;105.849518,26.251369;105.843769,26.236333;105.853542,26.233221;105.867915,26.221813;105.881713,26.199512;105.898961,26.186544;105.915633,26.196919;105.94093,26.208329;105.961627,26.21559;105.966226,26.236851;105.943229,26.263292;105.933456,26.27677;105.90701,26.268994;105.877689,26.270031;105.849518,26.277806;' +
                ''
        points.split(';').forEach(function (v) {
          var marker = new self.BMap.Marker(new self.BMap.Point(v.split(',')[0], v.split(',')[1]))
          self.map2.addOverlay(marker)
          marker.addEventListener('click', getAttr)
          function getAttr () {
            var p = marker.getPosition()       // 获取marker的位置
            self.point = p.lng + ',' + p.lat
            if (self.linePoint.indexOf((p.lng + ',' + p.lat + ';')) === -1) {
              self.linePoint = self.linePoint + p.lng + ',' + p.lat + ';'
            }
          }
        })
      },
      addOverlay () {
        var self = this
        self.map2.clearOverlays()
        self.addPoint()
        var polyline = new self.BMap.Polyline() // 折线覆盖物{strokeWeight: 2, strokeColor: '#ff0000'}
        polyline.setStrokeWeight(2)
        polyline.setStrokeColor('#ff0000')
        polyline.setPath(self.points)   // 设置折线的点数组
        self.map2.addOverlay(polyline)   // 将折线添加到地图上
        self.points.forEach(function (v) {
          var marker = new self.BMap.Marker(v)
          self.map2.addOverlay(marker)
          marker.addEventListener('click', getAttr)
          function getAttr () {
            var p = marker.getPosition()       // 获取marker的位置
            self.point = p.lng + ',' + p.lat
            if (self.linePoint.indexOf((p.lng + ',' + p.lat + ';')) === -1) {
              self.linePoint = self.linePoint + p.lng + ',' + p.lat + ';'
            }
          }
        })
        var xyArr = '106.251108, 26.233832;106.247354, 26.230927;106.249013, 26.226342;106.267123, 26.230855;106.278208, 26.227787;106.296907, 26.214649;106.298629, 26.203173;106.290193, 26.195015;106.289282, 26.176727;106.280864, 26.149558;106.274552, 26.147865;106.26787, 26.134978;106.285387, 26.130182;106.288906, 26.123012;106.286681, 26.117229;106.29428, 26.112472;106.29556, 26.105315;106.285388, 26.105754;106.275213, 26.094825;106.267364, 26.092472;106.26285, 26.094387;106.264311, 26.104198;106.261485, 26.109215;106.253258, 26.104437;106.247336, 26.10499;106.248308, 26.080881;106.243322, 26.073152;106.245529, 26.066005;106.239891, 26.061144;106.243838, 26.055588;106.240232, 26.045768;106.222589, 26.041387;106.216483, 26.033286;106.217795, 26.027825;106.223662, 26.027336;106.223399, 26.020166;106.229191, 26.008604;106.223499, 26.005976;106.222369, 26.000548;106.227458, 25.997758;106.226859, 25.989475;106.224148, 25.988368;106.219018, 25.9941;106.206936, 25.992216;106.20934, 25.990296;106.2053, 25.989144;106.203258, 25.971999;106.191504, 25.974325;106.188988, 25.962208;106.193065, 25.956296;106.190239, 25.955299;106.186445, 25.959717;106.173638, 25.947238;106.169516, 25.948104;106.171593, 25.953569;106.165307, 25.964768;106.168815, 25.98335;106.161777, 26.002046;106.155556, 26.000826;106.153904, 26.005377;106.145129, 26.008289;106.12994, 26.008016;106.128013, 26.017131;106.122101, 26.020508;106.104465, 26.010868;106.100431, 26.012191;106.091197, 26.021469;106.093033, 26.028815;106.085172, 26.049505;106.077688, 26.053029;106.060775, 26.050494;106.055374, 26.043688;106.041566, 26.036297;106.036763, 26.037046;106.038345, 26.030895;106.030133, 26.023594;106.027816, 26.0147;106.016773, 26.005401;106.011986, 26.008793;106.013743, 26.01481;106.005094, 26.01465;106.002551, 26.019504;105.986228, 26.017987;105.971928, 26.010778;105.944685, 26.018091;105.944, 26.013552;105.927832, 26.005079;105.919887, 26.005136;105.918023, 25.999923;105.913149, 25.998835;105.912391, 26.004962;105.91898, 26.00883;105.918423, 26.014479;105.909827, 26.01167;105.901329, 26.01352;105.902458, 26.018569;105.910652, 26.022604;105.903223, 26.025727;105.903711, 26.034656;105.899514, 26.039918;105.884765, 26.039025;105.878555, 26.034003;105.871549, 26.036938;105.878633, 26.05116;105.875599, 26.055343;105.861565, 26.060275;105.854474, 26.069065;105.844284, 26.061297;105.844158, 26.064782;105.836491, 26.065153;105.846577, 26.07671;105.857212, 26.080655;105.854259, 26.083404;105.862036, 26.087243;105.863798, 26.101545;105.868029, 26.105169;105.870991, 26.102509;105.877559, 26.11512;105.886039, 26.121975;105.894291, 26.146876;105.886052, 26.141708;105.869961, 26.153307;105.849865, 26.14946;105.846197, 26.153978;105.824321, 26.143316;105.825556, 26.148724;105.811594, 26.136598;105.804768, 26.140185;105.808784, 26.143311;105.807658, 26.146111;105.813392, 26.146146;105.810528, 26.153314;105.79247, 26.139689;105.782546, 26.139354;105.776429, 26.140273;105.775963, 26.144386;105.769453, 26.142134;105.763391, 26.146537;105.77033, 26.150543;105.761555, 26.148423;105.753797, 26.157133;105.756566, 26.164793;105.768941, 26.178342;105.788627, 26.179379;105.791962, 26.18985;105.805539, 26.206298;105.809085, 26.201078;105.815664, 26.205769;105.813771, 26.210125;105.827058, 26.218907;105.82101, 26.231726;105.814928, 26.232161;105.815327, 26.234633;105.823963, 26.239032;105.843717, 26.236738;105.84439, 26.247158;105.848565, 26.250702;105.843527, 26.250228;105.851233, 26.272853;105.848517, 26.277925;105.864526, 26.28049;105.868531, 26.286548;105.868997, 26.29301;105.860665, 26.298832;105.863207, 26.311445;105.882068, 26.306073;105.885814, 26.312179;105.883524, 26.328039;105.876017, 26.32776;105.877552, 26.331473;105.866903, 26.333442;105.870102, 26.340638;105.91389, 26.358839;105.913585, 26.364548;105.920874, 26.3673;105.921451, 26.373831;105.926704, 26.369594;105.939001, 26.372486;105.939867, 26.389727;105.947305, 26.390704;105.954423, 26.398181;105.973473, 26.405111;105.968962, 26.4122;105.977841, 26.417042;105.987492, 26.434665;105.990774, 26.433858;105.988075, 26.443055;105.998979, 26.446782;106.001594, 26.430162;106.012245, 26.421916;106.045768, 26.430421;106.051273, 26.435142;106.068373, 26.436303;106.063081, 26.412685;106.086974, 26.40866;106.087601, 26.401726;106.095451, 26.400261;106.099079, 26.39229;106.087013, 26.38488;106.078476, 26.369959;106.075127, 26.358454;106.078435, 26.351282;106.097422, 26.359692;106.105086, 26.358683;106.118131, 26.372978;106.116864, 26.38829;106.109998, 26.39255;106.112328, 26.396079;106.122943, 26.396308;106.141029, 26.389308;106.161164, 26.387057;106.167347, 26.371466;106.15807, 26.367192;106.156537, 26.361108;106.16539, 26.35334;106.165268, 26.344286;106.175516, 26.33652;106.17073, 26.327948;106.156109, 26.320611;106.163045, 26.315665;106.168509, 26.301497;106.183244, 26.300072;106.205908, 26.31091;106.216454, 26.321491;106.225318, 26.320344;106.232379, 26.311565;106.233869, 26.297061;106.246604, 26.287169;106.253094, 26.288729;106.239322, 26.300715;106.241155, 26.304245;106.263024, 26.289649;106.284123, 26.300173;106.291158, 26.300711;106.292401, 26.294893;106.28648, 26.28646;106.287812, 26.276978;106.293463, 26.272916;106.280439, 26.264863;106.283836, 26.257038;106.30389, 26.265465;106.310195, 26.272244;106.309253, 26.282664;106.315689, 26.293256;106.311155, 26.300849;106.316513, 26.308846;106.335191, 26.293627;106.353947, 26.290246;106.366404, 26.27177;106.364207, 26.265193;106.367075, 26.258732;106.355604, 26.258077;106.354255, 26.240869;106.343543, 26.228836;106.331679, 26.22898;106.308732, 26.235652;106.302783, 26.260366;106.287216, 26.254879;106.28284, 26.245931;106.260023, 26.247966;106.259451, 26.236478;106.251108, 26.233832'
        var ply = new self.BMap.Polygon(xyArr, {strokeWeight: 2, strokeColor: '#ff0000'}) // 建立多边形覆盖物
        self.map2.addOverlay(ply)  // 添加覆盖物
        //                pointArray = pointArray.concat(ply.getPath())
        //                self.map2.setViewport(pointArray)    // 调整视野
      },
      _init_bmap_3 (BMap) {
        var self = this
        self.map2 = new BMap.Map('allmap')
        self.map2.centerAndZoom(new BMap.Point(105.971975, 26.251887), 12)
        //                self.map2.enableScrollWheelZoom()
        self.addPoint()
        var polyline = new BMap.Polyline() // 折线覆盖物{strokeWeight: 2, strokeColor: '#ff0000'}
        polyline.setStrokeWeight(2)
        polyline.setStrokeColor('#ff0000')

        self.map2.addEventListener('click', function (e) {
          if (!self.startEdit) {
            return
          }
          var newpoint = new BMap.Point(e.point.lng, e.point.lat)
          self.points.push(newpoint)  // 将新增的点放到数组中
          polyline.setPath(self.points)   // 设置折线的点数组
          self.map2.addOverlay(polyline)   // 将折线添加到地图上
          if (self.linePoint.indexOf((e.point.lng + ',' + e.point.lat + ';')) === -1) {
            self.linePoint = self.linePoint + e.point.lng + ',' + e.point.lat + ';'
          }
          var marker = new BMap.Marker(newpoint)
          self.map2.addOverlay(marker)
          //                    marker.setLabel(label)
          marker.addEventListener('click', getAttr)
          function getAttr () {
            var p = marker.getPosition()       // 获取marker的位置
            self.point = p.lng + ',' + p.lat
            if (self.linePoint.indexOf((p.lng + ',' + p.lat + ';')) === -1) {
              self.linePoint = self.linePoint + p.lng + ',' + p.lat + ';'
            }
          }
        })

        var xyArr = '106.251108, 26.233832;106.247354, 26.230927;106.249013, 26.226342;106.267123, 26.230855;106.278208, 26.227787;106.296907, 26.214649;106.298629, 26.203173;106.290193, 26.195015;106.289282, 26.176727;106.280864, 26.149558;106.274552, 26.147865;106.26787, 26.134978;106.285387, 26.130182;106.288906, 26.123012;106.286681, 26.117229;106.29428, 26.112472;106.29556, 26.105315;106.285388, 26.105754;106.275213, 26.094825;106.267364, 26.092472;106.26285, 26.094387;106.264311, 26.104198;106.261485, 26.109215;106.253258, 26.104437;106.247336, 26.10499;106.248308, 26.080881;106.243322, 26.073152;106.245529, 26.066005;106.239891, 26.061144;106.243838, 26.055588;106.240232, 26.045768;106.222589, 26.041387;106.216483, 26.033286;106.217795, 26.027825;106.223662, 26.027336;106.223399, 26.020166;106.229191, 26.008604;106.223499, 26.005976;106.222369, 26.000548;106.227458, 25.997758;106.226859, 25.989475;106.224148, 25.988368;106.219018, 25.9941;106.206936, 25.992216;106.20934, 25.990296;106.2053, 25.989144;106.203258, 25.971999;106.191504, 25.974325;106.188988, 25.962208;106.193065, 25.956296;106.190239, 25.955299;106.186445, 25.959717;106.173638, 25.947238;106.169516, 25.948104;106.171593, 25.953569;106.165307, 25.964768;106.168815, 25.98335;106.161777, 26.002046;106.155556, 26.000826;106.153904, 26.005377;106.145129, 26.008289;106.12994, 26.008016;106.128013, 26.017131;106.122101, 26.020508;106.104465, 26.010868;106.100431, 26.012191;106.091197, 26.021469;106.093033, 26.028815;106.085172, 26.049505;106.077688, 26.053029;106.060775, 26.050494;106.055374, 26.043688;106.041566, 26.036297;106.036763, 26.037046;106.038345, 26.030895;106.030133, 26.023594;106.027816, 26.0147;106.016773, 26.005401;106.011986, 26.008793;106.013743, 26.01481;106.005094, 26.01465;106.002551, 26.019504;105.986228, 26.017987;105.971928, 26.010778;105.944685, 26.018091;105.944, 26.013552;105.927832, 26.005079;105.919887, 26.005136;105.918023, 25.999923;105.913149, 25.998835;105.912391, 26.004962;105.91898, 26.00883;105.918423, 26.014479;105.909827, 26.01167;105.901329, 26.01352;105.902458, 26.018569;105.910652, 26.022604;105.903223, 26.025727;105.903711, 26.034656;105.899514, 26.039918;105.884765, 26.039025;105.878555, 26.034003;105.871549, 26.036938;105.878633, 26.05116;105.875599, 26.055343;105.861565, 26.060275;105.854474, 26.069065;105.844284, 26.061297;105.844158, 26.064782;105.836491, 26.065153;105.846577, 26.07671;105.857212, 26.080655;105.854259, 26.083404;105.862036, 26.087243;105.863798, 26.101545;105.868029, 26.105169;105.870991, 26.102509;105.877559, 26.11512;105.886039, 26.121975;105.894291, 26.146876;105.886052, 26.141708;105.869961, 26.153307;105.849865, 26.14946;105.846197, 26.153978;105.824321, 26.143316;105.825556, 26.148724;105.811594, 26.136598;105.804768, 26.140185;105.808784, 26.143311;105.807658, 26.146111;105.813392, 26.146146;105.810528, 26.153314;105.79247, 26.139689;105.782546, 26.139354;105.776429, 26.140273;105.775963, 26.144386;105.769453, 26.142134;105.763391, 26.146537;105.77033, 26.150543;105.761555, 26.148423;105.753797, 26.157133;105.756566, 26.164793;105.768941, 26.178342;105.788627, 26.179379;105.791962, 26.18985;105.805539, 26.206298;105.809085, 26.201078;105.815664, 26.205769;105.813771, 26.210125;105.827058, 26.218907;105.82101, 26.231726;105.814928, 26.232161;105.815327, 26.234633;105.823963, 26.239032;105.843717, 26.236738;105.84439, 26.247158;105.848565, 26.250702;105.843527, 26.250228;105.851233, 26.272853;105.848517, 26.277925;105.864526, 26.28049;105.868531, 26.286548;105.868997, 26.29301;105.860665, 26.298832;105.863207, 26.311445;105.882068, 26.306073;105.885814, 26.312179;105.883524, 26.328039;105.876017, 26.32776;105.877552, 26.331473;105.866903, 26.333442;105.870102, 26.340638;105.91389, 26.358839;105.913585, 26.364548;105.920874, 26.3673;105.921451, 26.373831;105.926704, 26.369594;105.939001, 26.372486;105.939867, 26.389727;105.947305, 26.390704;105.954423, 26.398181;105.973473, 26.405111;105.968962, 26.4122;105.977841, 26.417042;105.987492, 26.434665;105.990774, 26.433858;105.988075, 26.443055;105.998979, 26.446782;106.001594, 26.430162;106.012245, 26.421916;106.045768, 26.430421;106.051273, 26.435142;106.068373, 26.436303;106.063081, 26.412685;106.086974, 26.40866;106.087601, 26.401726;106.095451, 26.400261;106.099079, 26.39229;106.087013, 26.38488;106.078476, 26.369959;106.075127, 26.358454;106.078435, 26.351282;106.097422, 26.359692;106.105086, 26.358683;106.118131, 26.372978;106.116864, 26.38829;106.109998, 26.39255;106.112328, 26.396079;106.122943, 26.396308;106.141029, 26.389308;106.161164, 26.387057;106.167347, 26.371466;106.15807, 26.367192;106.156537, 26.361108;106.16539, 26.35334;106.165268, 26.344286;106.175516, 26.33652;106.17073, 26.327948;106.156109, 26.320611;106.163045, 26.315665;106.168509, 26.301497;106.183244, 26.300072;106.205908, 26.31091;106.216454, 26.321491;106.225318, 26.320344;106.232379, 26.311565;106.233869, 26.297061;106.246604, 26.287169;106.253094, 26.288729;106.239322, 26.300715;106.241155, 26.304245;106.263024, 26.289649;106.284123, 26.300173;106.291158, 26.300711;106.292401, 26.294893;106.28648, 26.28646;106.287812, 26.276978;106.293463, 26.272916;106.280439, 26.264863;106.283836, 26.257038;106.30389, 26.265465;106.310195, 26.272244;106.309253, 26.282664;106.315689, 26.293256;106.311155, 26.300849;106.316513, 26.308846;106.335191, 26.293627;106.353947, 26.290246;106.366404, 26.27177;106.364207, 26.265193;106.367075, 26.258732;106.355604, 26.258077;106.354255, 26.240869;106.343543, 26.228836;106.331679, 26.22898;106.308732, 26.235652;106.302783, 26.260366;106.287216, 26.254879;106.28284, 26.245931;106.260023, 26.247966;106.259451, 26.236478;106.251108, 26.233832'
        var ply = new BMap.Polygon(xyArr, {strokeWeight: 2, strokeColor: '#ff0000'}) // 建立多边形覆盖物
        self.map2.addOverlay(ply)  // 添加覆盖物
        //                pointArray = pointArray.concat(ply.getPath())
        //                self.map2.setViewport(pointArray)    // 调整视野
      }
    }
  }
</script>